---
import Base from "../layouts/Base.astro";
import HomeHero from "../components/HomeHero";
import TripleSearch from "../components/TripleSearch";
import GuideChips from "../components/GuideChips";
import brands from "../data/brands.json";
import { ldWebsite } from "../lib/jsonld";

const title = "Vitamin Brand Index";
const description = "Independent brand and product factsâ€”so you pick what actually works.";
const canonical = "https://vitaminbrandindex.com/";
const jsonLd = ldWebsite({ base: canonical });

// Dynamically import products.json so build/preview still works if the file is absent
let products = [];
try {
  products = (await import("../data/products.json")).default;
} catch {}
---
<Base {title} {description} {canonical}>
  <HomeHero client:idle />
  <TripleSearch client:load brands={brands} products={products} />
  <GuideChips client:only="react" />

  <script type="application/ld+json">
    {JSON.stringify(jsonLd)}
  </script>

</Base>
